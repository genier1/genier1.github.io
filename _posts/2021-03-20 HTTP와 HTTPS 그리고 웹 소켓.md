## HTTP

- Hyper Text Transfer Protocol의 약자로써, 인터넷에서 하이퍼텍스트를 교환하기 위한 통신 규약이다.
- 클라이언트에서 URL을 요청하면, 서버에서 응답하는 방식
- TCP와 UDP를 사용하며, 80번 포트를 사용한다. 

### 대표적인 Request Method

- Get - 요청받은 URI의 정보를 검색하여 응답한다.
- Head - GET방식과 동일하지만, 응답에 BODY가 없고 응답코드와 HEAD만 응답한다.
- Post - 요청된 자원을 생성(CREATE)한다. 
- Put - 요청된 자원을 수정(UPDATE)한다.
- Delete -  요청된 자원을 삭제할 것을 요청한다. 

### Request 메시지 설명

~~~ 
GET https://genier.github.io HTTP/1.1		// 시작줄
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) ...			  // 헤더
Upgrade-Insecure-Requests: 1
~~~

1. 첫 줄 
   1. HTTP Method(Get), 사이트 주소, HTTP 버전(HTTP/1.1)을 담고 있다.
2. 두번째 줄(헤더) 
   1. 요청에 대한 정보를 포함하고 있음
3. 세번째 줄(바디) 
   1. HTTP 요청이 전송하는 데이터를 담고 있는 부분

### HTTP STATUS

- 모든 HTTP 응답 코드는 5개의 클래스(분류)로 구분된다. 상태 코드의 첫 번째 숫자는 응답의 클래스를 정의한다. 마지막 두 자리는 클래스나 분류 역할을 하지 않는다
- 1xx(조건부 응답) - 요청을 받았으며 작업을 계속한다.
- 2xx(성공) - 요청을 성공적으로 받고 수용하였다.
- 300(리다이렉션) - 요청 완료를 위해 추가적인 조치가 필요하다.
- 400(클라이언트 오류) - 요청의 문법이 잘못되었거나 요청을 처리할 수 없다.
- 5xx(서버 오류) - 유효한 요청에 대해 서버가 충족하지 못하였다.

## HTTPS

- S는 Secured의 약자이며 개인정보 보호, 무결성, 식별을 위해 이용된다.
- HTTP에 SSL/TLS를 사용하여 데이터를 암호화 한다.
    - SSL은 Secure Socket Layer의 약자이며, 90년대에 생성된 오리지널 프로토콜이다. 이후 IETF에서 SSL을 계승한 TLS(Transport Layer Security)라는 프로토콜을 만들어 지금까지 관리해오고 있다.
- SSL을 통해서 암호화된 통신을 제공하려는 서비스는 CA를 통해서 인증서를 구입해야 한다.
    - CA는 3가지의 주요 목표를 가진다.
        - 인증서 발급, 인증서 소유자의 신원 확인, 인증서가 유효하다는 증거 제공
    - 직접 CA의 역할을 할 수도 있으나, 이는 공인된 인증서가 아니므로 브라우저에서는 경고메시지를 출력한다.
- SSL 인증서에는 서비스의 정보와 서버 측 공개키 등이 포함되어 있으며 해당 내용은 CAdp 의해 암호화 된다.
    - 공개키 암호화 방식을 통해 암호화가 진행된다.
        - 공개키 방식으로 대칭키를 전달하며, 서로 공유된 대칭키를 통해 통신하게 된다.
- 결국, 다음과 같은 방식으로 인증이 진행된다
    - 브라우저에서 HTTPS를 통해 사이트에 연결하고 인증서를 다운로드한다. 
    - 브라우저는 서버의 인증서가 CA에 의해 발급되었는지를 확인하기 위해 브라우저에 저장되어 있는 CA리스트를 확인한다.
    - CA리스트에 있는 CA에 의해 발급되어 있는 경우 브라우저는 CA의 공개키를 이용해서 인증서를 복호화한다. 이후 세션키를 클라이언트와 서버가 모두 공유하고 SSL 통신을 종료한다.
    - 그러나 CA리스트에 없을 경우, 브라우저에서는 '안전하지 않은 사이트' 등의 경고 메시지를 발송한다.
- http를 https로 변경하는 방법에 대해서는 [Outsider님의 글](https://blog.outsider.ne.kr/1149)이 매우 잘 설명되어 있다.

## 웹 소켓

### 웹 소켓이란

- HTML5 표준 기술이며, 브라우저와 서버 사이의 양방향 통신기법이다.
- 서버에서 클라이언트를 호출할 수 있는 기능이 최대 장점이다. 
  - 채팅 앱에서 웹 소켓이 없다면, 상대방의 메시지를 실시간으로 확인할 수 없다.
  - 웹 소켓의 대표적인 사용 예시 - SNS 앱, 증권 거래 사이트, 화상 채팅 앱 등등 
- 브라우저별로 지원하는 웹소켓 버전은 다를 수 있다.

### 웹 소켓 등장 이전의 과정

- HTTP 규약상 브라우저는 서버와 통신하려면 다른 페이지로 이동해야했다.
  - 초기에는 서버로부터 새로운 정보를 받아보기 위해 무조건 새로운 URL을 요청해야 했었음
- 이를 피하기 위해서 이전에는 iFrame, Flash, activeX 등의 편법을 사용하였다.
- 그러나 Ajax를 통해 웹페이지에서 페이지 이동 없이도 서버와의 통신이 가능해졌다.
  - Ajax - 자바스크립트와 xml을 이용한 비동기적 통신(Asynchronous Javascript And Xml)
  - XMLHttpRequest 객체가 서버에 요청하며 새로운 페이지로 이동하지 않아도, Json이나 xml형태로 필요한 데이터만 주고 받으며 DOM을 갱신하는 구조
- 그러나, Ajax를 사용할 경우, 서버가 브라우저에게 먼저 통신을 시작할 방법이 없음
- 이를 해결하기 위해 comet 등이 생겨남.
  - 그러나, 데이터 수신을 위해 서버가 클라이언트에게 전송해 주는 푸시(push)방식이 아니라 여전히 클라이언트가 서버에게 요청하는 폴링(polling) 방식을 사용했다.
  - 이 때문에 서버에 많은 부담을 준다는 부작용이 있었다.
- HTML 5부터 실시간 양방향 통신이 가능한 웹 소켓이 등장하였다.

## 출처

- https://www.clien.net/service/board/lecture/15872844
- [HTTP에서부터 WEBSOCKET까지](https://medium.com/@chullino/http%EC%97%90%EC%84%9C%EB%B6%80%ED%84%B0-websocket%EA%B9%8C%EC%A7%80-94df91988788)
- [HTML5를 여행하는 비(非) 웹 개발자를 위한 안내서 - 1부 웹소켓](https://www.slideshare.net/hiscale/111015-html5-1)
- [위키피디아 - HTTP 상태 코드](https://ko.wikipedia.org/wiki/HTTP_상태_코드)
- [HTTP란 무엇인가](https://velog.io/@surim014/HTTP%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80)
- [HTTPS 작동 방식](https://howhttps.works/ko/)
- [생활코딩 - HTTPS와 SSL 인증서](https://opentutorials.org/course/228/4894)