## 정규화

### 왜 정규화를 해야 할까?

릴레이션 하나에 여러 개체의 속성들을 혼합하게 되면 정보가 중복 저장되며, 저장 공간을 낭비하게 된다. 또한  중복된 정보로 인해 갱신 이상이 발생하게 된다. 이러한 문제를 해결하기 위해 데이터베이스 정규화를 진행한다.

### 갱신 이상의 종류

- 삽입 이상 - 반복된 데이터 중에 일부를 갱신 할 시 데이터의 불일치가 발생한다.
- 갱신 이상 - 불필요한 정보를 함께 저장하지 않고서는 어떤 정보를 저장하는 것이 불가능하다.
  - 예시 - 삽입하려는 정보는 3개인데, 테이블의 칼럼은 4개인 경우
- 삭제 이상 - 필요한 정보를 함께 삭제하지 않고서는 어떤 정보를 삭제하는 것이 불가능하다.

### 정규화의 종류(제 1 정규화 ~ 제 3 정규화)

- 제1 정규화
  - 각 로우마다 컬럼의 값이 1개씩만 있어야 한다. 이를 컬럼이 원자값(Atomic Value)를 갖는다고 한다.
- 제2 정규화
  - 테이블의 모든 컬럼이 완전 함수적 종속을 만족하는 것.
  - 즉, 기본키 중에 특정 컬럼에만 종속된 컬럼(부분적 종속)이 없어야 한다
- 제3 정규화
  - 기본키를 제외한 속성들 간의 이행적 함수 종속이 없는 것.
  - 즉, 기본키 이외의 다른 컬럼이 그외 다른 컬럼을 결정할 수 없다.
- BCNF(Boyce-Codd) 정규화
  - 제3 정규화로도 해결하기 어려운 이상현상을 해결하기 위해 등장한 정규화
  - 3차정규형을 만족하면서 모든 결정자가 후보키 집합에 속한 경우 BCNF를 만족한다.

### 정규화의 단점

릴레이션을 분해하기 때문에, 릴레이션 간의 연산(JOIN 등)이 많아진다. 이로 인해 질의에 대한 응답 시간이 늦어질 수 있다.

## DB 설계

### 개념적 설계(정보 모델링)

- 핵심 개체(Entity)를 정의하고 ERD를 작성한다.
- 개념적 데이터 모델로 E-R 모델을 많이 사용한다.

### 논리적 설계(데이터 모델링)

- 개발에 사용할 DBMS에 적합한 논리적 데이터 모델을 이용해 설계한다.
- 정규화 등을 진행한다.

### 물리적 설계(데이터 구조화)

- 위의 계획에 따라 DB 개체를 정의한다.
- 테이블 및 인덱스 등의 구조를 설계한다.

## ER 모델( Entity Relation Model )

![er-diagram](https://user-images.githubusercontent.com/19471818/112473092-44ec5980-8db1-11eb-8ba0-cae10122d2bd.png)

- 정보들을 개체(Entity), 애트리뷰트(Attribute), 관계성(Relation)으로 기술하는 데이터 모델

### 개체(Entity)

개체란 데이터베이스에 데이터로 표현하려고 하는 현실 세계의 대상체를 말한다. 

### 속성(Attribute)

개체가 갖는 속성을 의미한다. 예를 들어, 학생이라는 개체에는 학번, 이름, 학과 같은 속성이 있을 수 있다.

### 관계성(Relation)

개체간의 관계를 의미한다. 관계성에 대해서는 크게 세 가지로 분류한다.

- One to One(1:1)
  - 하나의 주체가 하나의 상태값을 가지는 상태 
  - 예시) 1명의 유저는 1개의 이름을 가진다. 
- One to Many(1:N)
  - 하나의 주체가 여러 개의 상태값을 가질 수 있는 상태 
  - 이 경우 항상 One이 연관관계의 주인이며, Many 측에 외래키가 있다.
  - 예시) 하나의 상품에 여러 개의 리뷰가 달릴 수 있다.
- Many to Many(M:N)
  - 매우 복잡한 관계 모델로, 서로 다양한 모델과 관계되어질 수 있다.
  - 예시) 한 명의 저자가 여러 책을 쓸 수 있고, 책 한권에는 여러 저자가 있을 수 있다.

## 출처

- [데이터베이스 정규화 1NF, 2NF, 3NF, BCNF](https://3months.tistory.com/193)
- [[DB이론\] ER 모델 Entity Relation Model)](https://victorydntmd.tistory.com/126)
- [Interview_Question_for_Beginner](https://github.com/JaeYeopHan/Interview_Question_for_Beginner/tree/master/Database)
- [데이터베이스 이상 현상(Anomaly)](https://1000hg.tistory.com/22)